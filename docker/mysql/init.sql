-- init.sql

-- Default DB defined by MYSQL_DATABASE=analytics
CREATE TABLE IF NOT EXISTS transactions (
    transaction_id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT,
    category VARCHAR(50),
    amount DECIMAL(10,2),
    transaction_date DATE
);

INSERT INTO transactions (customer_id, category, amount, transaction_date)
VALUES
(1, 'Food', 120.50, '2023-01-01'),
(1, 'Travel', 300.00, '2023-01-02'),
(2, 'Food', 75.20, '2023-01-01'),
(2, 'Bills', 220.00, '2023-01-03');

-- Create second database
CREATE DATABASE IF NOT EXISTS Scenario01;

-- Grant access for your app user
GRANT ALL PRIVILEGES ON Scenario01.* TO 'analyst'@'%';
FLUSH PRIVILEGES;

USE Scenario01;

CREATE TABLE customers (
    customer_id INT PRIMARY KEY,
    country VARCHAR(2),
    province_state VARCHAR(10),
    signup_date DATE,
    segment VARCHAR(10)
);
-- INSERT DATA FOR customers
INSERT INTO customers (customer_id, country, province_state, signup_date, segment) VALUES
(1, 'CA', 'ON', '2024-01-05', 'SMB'),
(2, 'CA', 'BC', '2024-02-10', 'ENT'),
(3, 'US', 'NY', '2024-01-20', 'SMB'),
(4, 'CA', 'QC', '2024-03-15', 'ENT'),
(5, 'BR', 'SP', '2024-01-25', 'IND'),
(6, 'US', 'CA', '2024-04-02', 'SMB'),
(7, 'CA', 'AB', '2024-02-18', 'IND'),
(8, 'BR', 'RJ', '2024-03-30', 'SMB'),
(9, 'US', 'TX', '2024-02-05', 'ENT'),
(10, 'CA', 'ON', '2024-04-10', 'SMB'),
(11, 'CA', 'ON', '2024-01-12', 'SMB'),
(12, 'CA', 'BC', '2024-02-17', 'ENT'),
(13, 'US', 'NY', '2024-01-27', 'SMB'),
(14, 'CA', 'QC', '2024-03-22', 'ENT'),
(15, 'BR', 'SP', '2024-02-01', 'IND'),
(16, 'US', 'CA', '2024-04-09', 'SMB'),
(17, 'CA', 'AB', '2024-02-25', 'IND'),
(18, 'BR', 'RJ', '2024-04-06', 'SMB'),
(19, 'US', 'TX', '2024-02-12', 'ENT'),
(20, 'CA', 'ON', '2024-04-17', 'SMB'),
(21, 'CA', 'MB', '2024-01-18', 'SMB'),
(22, 'CA', 'SK', '2024-02-22', 'IND'),
(23, 'US', 'FL', '2024-03-03', 'ENT'),
(24, 'US', 'WA', '2024-03-19', 'SMB'),
(25, 'BR', 'MG', '2024-01-30', 'IND'),
(26, 'BR', 'RS', '2024-03-10', 'SMB'),
(27, 'CA', 'NS', '2024-04-01', 'SMB'),
(28, 'CA', 'NB', '2024-04-05', 'ENT'),
(29, 'US', 'IL', '2024-02-28', 'SMB'),
(30, 'US', 'CO', '2024-03-25', 'IND');


CREATE TABLE products (
    product_id INT PRIMARY KEY,
    product_name VARCHAR(50),
    category VARCHAR(30),
    monthly_price DECIMAL(10,2)
);
-- INSERT DATA FOR products
INSERT INTO products (product_id, product_name, category, monthly_price) VALUES
(101, 'Basic Analytics', 'Analytics', 49),
(102, 'Pro Analytics', 'Analytics', 129),
(103, 'Supply Chain Opt', 'Supply Chain', 299),
(104, 'Fraud Detector', 'Risk', 399),
(105, 'Enterprise Analytics', 'Analytics', 599.00),
(106, 'Marketing Insights', 'Analytics', 199.00),
(107, 'Logistics Planner', 'Supply Chain', 179.00),
(108, 'Inventory Optimizer', 'Supply Chain', 249.00),
(109, 'Compliance Monitor', 'Risk', 349.00),
(110, 'Credit Scoring', 'Risk', 279.00),
(111, 'Churn Predictor', 'Analytics', 159.00),
(112, 'Revenue Forecaster', 'Analytics', 209.00);


CREATE TABLE subscriptions (
    subscription_id INT PRIMARY KEY,
    customer_id INT,
    product_id INT,
    start_date DATE,
    end_date DATE,
    status VARCHAR(20)
);
INSERT INTO subscriptions (subscription_id, customer_id, product_id, start_date, end_date, status) VALUES
(1001, 1, 101, '2024-01-10', '2024-04-09', 'cancelled'),
(1002, 1, 102, '2024-03-01', NULL, 'active'),
(1003, 2, 101, '2024-02-15', NULL, 'active'),
(1004, 3, 101, '2024-01-25', '2024-03-01', 'cancelled'),
(1005, 3, 103, '2024-03-05', NULL, 'active'),
(1006, 4, 102, '2024-04-01', NULL, 'active'),
(1007, 5, 101, '2024-01-28', '2024-02-27', 'cancelled'),
(1008, 6, 101, '2024-02-10', '2024-03-15', 'cancelled'),
(1009, 6, 104, '2024-04-20', NULL, 'active'),
(1010, 7, 103, '2024-03-15', NULL, 'active'),
(1011, 8, 101, '2024-02-25', NULL, 'active'),
(1012, 9, 101, '2024-01-29', '2024-03-01', 'cancelled'),
(1013, 9, 103, '2024-03-18', NULL, 'active'),
(1014, 10, 101, '2024-04-15', NULL, 'active'),
(1015, 1, 104, '2024-04-15', NULL, 'active'),
(1016, 2, 104, '2024-04-20', NULL, 'active'),
(1017, 3, 102, '2024-04-25', NULL, 'active'),
(1018, 4, 103, '2024-05-01', NULL, 'active'),
(1019, 5, 104, '2024-05-05', NULL, 'active'),
(1020, 6, 102, '2024-05-10', NULL, 'active'),
(1021,  1, 103, '2024-05-01', NULL, 'active'),
(1022,  1, 101, '2024-06-01', NULL, 'active'),
(1023,  2, 101, '2024-05-10', '2024-07-10', 'cancelled'),
(1024,  2, 102, '2024-06-15', NULL, 'active'),
(1025,  3, 104, '2024-05-20', NULL, 'active'),
(1026,  3, 101, '2024-06-05', '2024-08-04', 'cancelled'),
(1027,  4, 101, '2024-05-25', NULL, 'active'),
(1028,  4, 102, '2024-06-20', NULL, 'active'),
(1029,  5, 103, '2024-05-30', '2024-07-29', 'cancelled'),
(1030,  5, 101, '2024-06-25', NULL, 'active'),
(1031,  6, 103, '2024-06-01', NULL, 'active'),
(1032,  6, 101, '2024-07-01', NULL, 'active'),
(1033,  7, 101, '2024-05-18', '2024-06-18', 'cancelled'),
(1034,  7, 102, '2024-07-05', NULL, 'active'),
(1035,  8, 103, '2024-06-10', NULL, 'active'),
(1036,  8, 104, '2024-07-15', NULL, 'active'),
(1037,  9, 102, '2024-05-12', '2024-06-12', 'cancelled'),
(1038,  9, 101, '2024-07-20', NULL, 'active'),
(1039, 10, 103, '2024-06-18', NULL, 'active'),
(1040, 10, 104, '2024-07-25', NULL, 'active'),
(1041,  1, 105, '2024-08-01', NULL, 'active'),
(1042,  2, 106, '2024-08-05', NULL, 'active'),
(1043,  3, 107, '2024-08-10', '2024-10-09', 'cancelled'),
(1044,  4, 108, '2024-08-15', NULL, 'active'),
(1045,  5, 109, '2024-08-20', NULL, 'active'),
(1046,  6, 110, '2024-08-25', NULL, 'active'),
(1047,  7, 111, '2024-09-01', NULL, 'active'),
(1048,  8, 112, '2024-09-05', NULL, 'active'),
(1049,  9, 105, '2024-09-10', '2024-11-09', 'cancelled'),
(1050, 10, 106, '2024-09-15', NULL, 'active'),
(1051,  1, 107, '2024-09-20', NULL, 'active'),
(1052,  2, 108, '2024-09-25', NULL, 'active'),
(1053,  3, 109, '2024-10-01', NULL, 'active'),
(1054,  4, 110, '2024-10-05', '2024-12-04', 'cancelled'),
(1055,  5, 111, '2024-10-10', NULL, 'active'),
(1056,  6, 112, '2024-10-15', NULL, 'active'),
(1057,  7, 105, '2024-10-20', NULL, 'active'),
(1058,  8, 106, '2024-10-25', '2024-12-24', 'cancelled'),
(1059,  9, 107, '2024-11-01', NULL, 'active'),
(1060, 10, 108, '2024-11-05', NULL, 'active');


CREATE TABLE payments (
    payment_id INT PRIMARY KEY,
    subscription_id INT,
    payment_date DATE,
    amount DECIMAL(10,2)
);
INSERT INTO payments (payment_id, subscription_id, payment_date, amount) VALUES
(2001, 1001, '2024-01-10', 49),
(2002, 1001, '2024-02-10', 49),
(2003, 1002, '2024-03-01', 129),
(2004, 1003, '2024-02-15', 49),
(2005, 1004, '2024-03-05', 299),
(2006, 1005, '2024-04-01', 129),
(2007, 1006, '2024-01-28', 49),
(2008, 1007, '2024-01-28', 49),
(2009, 1008, '2024-02-10', 49),
(2010, 1008, '2024-03-10', 399),
(2011, 1009, '2024-04-20', 399),
(2012, 1010, '2024-03-15', 299),
(2013, 1011, '2024-02-25', 49),
(2014, 1012, '2024-01-29', 49),
(2015, 1013, '2024-03-18', 299),
(2016, 1014, '2024-04-15', 49),
(2017, 1015, '2024-04-15', 399),
(2018, 1016, '2024-04-20', 399),
(2019, 1017, '2024-04-25', 129),
(2020, 1018, '2024-05-01', 299),
(2021, 1019, '2024-05-05', 399),
(2022, 1020, '2024-05-10', 129),
(2023, 1001, '2024-03-10', 49),
(2024, 1002, '2024-04-01', 129),
(2025, 1003, '2024-03-15', 49),
(2026, 1005, '2024-04-05', 299),
(2027, 1006, '2024-05-01', 129),
(2028, 1010, '2024-04-15', 299),
(2029, 1011, '2024-03-25', 49),
(2030, 1013, '2024-04-18', 299),

(2031, 1014, '2024-05-15', 49.00),
(2032, 1015, '2024-05-15', 399.00),
(2033, 1016, '2024-05-20', 399.00),
(2034, 1017, '2024-05-25', 129.00),
(2035, 1018, '2024-06-01', 299.00),
(2036, 1019, '2024-06-05', 399.00),
(2037, 1020, '2024-06-10', 129.00),
(2038, 1002, '2024-05-01', 129.00),
(2039, 1003, '2024-04-15', 49.00),
(2040, 1005, '2024-05-05', 299.00),

(2041, 1021, '2024-05-01', 299.00),
(2042, 1022, '2024-06-01', 49.00),
(2043, 1023, '2024-05-10', 49.00),
(2044, 1024, '2024-06-15', 129.00),
(2045, 1025, '2024-05-20', 399.00),
(2046, 1026, '2024-06-05', 49.00),
(2047, 1027, '2024-05-25', 49.00),
(2048, 1028, '2024-06-20', 129.00),
(2049, 1029, '2024-05-30', 299.00),
(2050, 1030, '2024-06-25', 49.00),

(2051, 1031, '2024-06-01', 299.00),
(2052, 1032, '2024-07-01', 49.00),
(2053, 1033, '2024-05-18', 49.00),
(2054, 1034, '2024-07-05', 129.00),
(2055, 1035, '2024-06-10', 299.00),
(2056, 1036, '2024-07-15', 399.00),
(2057, 1037, '2024-05-12', 129.00),
(2058, 1038, '2024-07-20', 49.00),
(2059, 1039, '2024-06-18', 299.00),
(2060, 1040, '2024-07-25', 399.00),

(2061, 1021, '2024-06-01', 299.00),
(2062, 1022, '2024-07-01', 49.00),
(2063, 1023, '2024-06-10', 49.00),
(2064, 1024, '2024-07-15', 129.00),
(2065, 1025, '2024-06-20', 399.00),
(2066, 1026, '2024-07-05', 49.00),
(2067, 1027, '2024-06-25', 49.00),
(2068, 1028, '2024-07-20', 129.00),
(2069, 1029, '2024-06-30', 299.00),
(2070, 1030, '2024-07-25', 49.00),

(2071, 1041, '2024-08-01', 599.00),
(2072, 1042, '2024-08-05', 199.00),
(2073, 1043, '2024-08-10', 179.00),
(2074, 1044, '2024-08-15', 249.00),
(2075, 1045, '2024-08-20', 349.00),
(2076, 1046, '2024-08-25', 279.00),
(2077, 1047, '2024-09-01', 159.00),
(2078, 1048, '2024-09-05', 209.00),
(2079, 1049, '2024-09-10', 599.00),
(2080, 1050, '2024-09-15', 199.00),

(2081, 1051, '2024-09-20', 179.00),
(2082, 1052, '2024-09-25', 249.00),
(2083, 1053, '2024-10-01', 349.00),
(2084, 1054, '2024-10-05', 279.00),
(2085, 1055, '2024-10-10', 159.00),
(2086, 1056, '2024-10-15', 209.00),
(2087, 1057, '2024-10-20', 599.00),
(2088, 1058, '2024-10-25', 199.00),
(2089, 1059, '2024-11-01', 179.00),
(2090, 1060, '2024-11-05', 249.00);

